#macro(putHistoTriggerInsert $action)
INSERT INTO ${table.name}_H (
#foreach($column in ${table.columns})
#putColumnParams()
#if($velocityCount>1),#else #end$column.name
#end
,AUD_NUMBER
,AUD_ACTION
,AUD_USER
,AUD_DATE) 
VALUES (
#foreach($column in ${table.columns})
#putColumnParams()
#if($velocityCount>1),#else #end:new.$column.name
#end
,(SELECT NVL(MAX(AUD_NUMBER),0) + 1 FROM ${table.name}_H h 
WHERE 
#foreach($column in ${table.columns})
#putColumnParams()
#if($velocityCount>1) AND #else #end h.$column.name = :new.$column.name
#end
)
,'$action'
,NVL(:new.AUD_USER,'unknown')
,SYSDATE
); 
#end

#macro(createHistoryTable)
CREATE TABLE ${table.name}_T (
#foreach($column in ${table.columns})
#putColumnParams()
#if($velocityCount>1),#else #end$column.name $column.type 
#end
,AUD_NUMBER INTEGER
,AUD_ACTION CHAR(3)
,AUD_USER VARCHAR(20)
,AUD_DATE TIMESTAMP
) 
; 
#end

