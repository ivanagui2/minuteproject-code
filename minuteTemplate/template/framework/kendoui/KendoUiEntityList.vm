
<script src="http://cdn.kendostatic.com/<version>/js/jquery.min.js"></script>
<script src="http://cdn.kendostatic.com/<version>/js/kendo.all.min.js"></script>
<script src="http://cdn.kendostatic.com/<version>/js/cultures/kendo.culture.en-GB.min.js"></script>

<script id="grid-template" type="text/x-kendo-template">
 <span>
 # if (dispatchedToCurrentGroup) { #
   <span class="k-icon k-i-note" style="vertical-align:-5px; margin-left:-8px; " title="title"/>

 # } #
 </span>
</script>
<script type="text/javascript">
$(function () {
  var expandedRow;

  function detailExpand(e) {
   if (expandedRow != null &amp;&amp; expandedRow[0] != e.masterRow[0]) {
     var grid = $('#${tableVariableName}').data('kendoGrid');
     grid.collapseRow(expandedRow);

     }
     expandedRow = e.masterRow;
  }

  $("#${tableVariableName}List").kendoGrid({ 
   dataSource: {
    error: function (e) {
     if (e.errors !== false) {
        $("#${tableVariableName}ListFooter").text(e.errors);
     }
    },
	transport: {
     read: {
      url: "data/entity/${tableVariableName}/list",
      dataType: "json",
      contentType: "application/json; charset=utf-8",
      cache: false
     }
    },
    schema: {
     data: "data",
     total: "total",
     errors: "error"
    },
    sort: {
     field: "$kendoUiUtils.getSortFields()",
     dir: "$kendoUiUtils.getSortFields()"
    },
    serverPaging: true,
    serverSorting: true,
    serverFiltering: true
   },
   columnMenu: {
    messages: {
     columns: "$kendoUiUtils.getMessageColumns($table)",
     filter: "$kendoUiUtils.getMessageFilterColumns($table)",
     sortAscending: "$kendoUiUtils.getMessageSortAscColumns($table)",
     sortDescending: "$kendoUiUtils.getMessageSortDescColumns($table)"
    }
   },
   detailTemplate: kendo.template($("#${tableVariableName}DetailTemplate").html()),
   detailInit: ${tableVariableName}ListDetailInit,
   detailExpand: ${tableVariableName}ListDetailExpand,
   dataBound: iscListDataBound,
   groupable: false,
   sortable: true,
   filterable: {
    messages: {
     info: "$kendoUiUtils.getFilterableMessageInfo($table)",
     filter: "$kendoUiUtils.getFilterableMessageFilter($table)",
     clear: "$kendoUiUtils.getFilterableMessageClear($table)",
     isTrue: "$kendoUiUtils.getFilterableMessageIsTrue($table)",
     isFalse: "$kendoUiUtils.getFilterableMessageIsFalse($table)",
     and: "$kendoUiUtils.getFilterableMessageAnd($table)",
     or: "$kendoUiUtils.getFilterableMessageOr($table)"
    },
    operators: {
     string: {
      eq: "$kendoUiUtils.getOperatorStringEqual($table)",
      neq: "$kendoUiUtils.getOperatorStringNotEqual($table)",
      startswith: "$kendoUiUtils.getOperatorStringStartsWith($table)",
      contains: "$kendoUiUtils.getOperatorStringContains($table)",
      endswith: "$kendoUiUtils.getOperatorStringEndsWith($table)"
     },
     number: {
      eq: "$kendoUiUtils.getOperatorNumberEquals($table)",
      neq: "$kendoUiUtils.getOperatorNumberNotEquals($table)",
      gte: "",
      gt: "",
      lte: "",
      lt: ""
     },
	 date: {
      eq: "",
      neq: "",
      gte: "",
      gt: "",
      lte: "",
      lt: ""
     }
    }
   },
   scrollable: {
    virtual: true
   },
   pageable: {
    refresh: true,
     pageSizes: $kendoUiUtils.pageSizes,
     pageSize: $kendoUiUtils.pageSize,
     buttonCount: $kendoUiUtils.buttonCount,
     messages: {
      display: "$kendoUiUtils.getPageableMessageDisplay($table)",
      empty: "$kendoUiUtils.getPageableEmptyMessageDisplay($table)",
      page: "$kendoUiUtils.getPageablePage($table)",
      of: "$kendoUiUtils.getPageableMessageOf()",
      itemsPerPage: "$kendoUiUtils.getPageableMessageItemPerPage($table)",
      first: "$kendoUiUtils.getPageableMessageFirst($table)",
      previous: "$kendoUiUtils.getPageableMessagePrevious($table)",
      next: "$kendoUiUtils.getPageableMessageNext($table)",
      last: "$kendoUiUtils.getPageableMessageLast($table)",
      refresh: "$kendoUiUtils.getPageableMessageRefresh($table)"
     }
    },
    columns: [
#set($counter=0)
#foreach ($column in $table.columns)
     {
      template: kendo.template($("#grid-template").html()),
      title: '',
      width: 30,
      headerAttributes: ""
//format: "{0: dd/MM/yyyy}",
//filterable: false
     }#if($velocityCount<$counter),#end 
#set($counter=$counter+1)
#end
     }]
    });
  });
</script>
<div class="k-content">
 <div id="headerMsg" class="msgLine">
 </div>
  <div id="${tableVariableName}List"></div>
  <div id="${tableVariableName}ListFooter"></div>
</div>
