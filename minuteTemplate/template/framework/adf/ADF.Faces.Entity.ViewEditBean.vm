#exposeADFFacesEntitySpecific()
package $packageName;

import $beanVOADFFacesImport;

import java.util.HashMap;
import java.util.Map;

import oracle.adf.model.BindingContext;
import oracle.adf.model.binding.DCBindingContainer;
import oracle.adf.view.rich.context.AdfFacesContext;

import oracle.binding.BindingContainer;
import oracle.binding.OperationBinding;

public class $className {
    
    private ${beanVOADFFacesClass} ${beanVOADFFacesVariable};
    private String ${domainVariableName}Param;
    
    public $className () {
        ${domainVariableName}Param = (String)AdfFacesContext.getCurrentInstance().getDialogService().getInitialDialogParameters().get("get${domainClassName}");
    }

    public void delete${domainClassName}(DCBindingContainer bindings) {
        this.${beanVOADFFacesVariable} = null;
        Map ${domainVariableName}Param = new HashMap();
        ${domainVariableName}Param.put("${domainClassName}Ref", getCurrent${domainClassName}(bindings));
        OperationBinding ob = bindings.getOperationBinding("delete${domainClassName}");
        ob.getParamsMap().putAll(${domainVariableName}Param);
        ob.execute();
    }
    
    public void rollback${domainClassName}() {
        this.${beanVOADFFacesVariable} = null;
    }
    
    public void save${domainClassName}(DCBindingContainer bindings) {
        Map ${domainVariableName}Param = new HashMap();
        ${domainVariableName}Param.put("${domainClassName}", this.${beanVOADFFacesVariable});
        OperationBinding ob = bindings.getOperationBinding("createOrUpdate${domainClassName}");
        ob.getParamsMap().putAll(${domainVariableName}Param);
        ob.execute();
    }
    
    public void set${domainClassName}($beanVOADFFacesClass ${beanVOADFFacesVariable}) {
        this.${beanVOADFFacesVariable} = ${beanVOADFFacesVariable};
    }

    public ${beanVOADFFacesClass} get${domainClassName}() {
        
        if (${beanVOADFFacesVariable}==null) {
            BindingContext bindingCtx = BindingContext.getCurrent();
            BindingContainer bindings = bindingCtx.getCurrentBindingsEntry();
            ${beanVOADFFacesVariable} = getCurrent${domainClassName}(bindings);
        }
        return ${beanVOADFFacesVariable};
    
    }

    private ${beanVOADFFacesClass} getCurrent${domainClassName}(BindingContainer bindings){
#if($tocomment)
        ReferenceDTO ref = new ReferenceDTO();
        ref.setKey(${domainVariableName}Param);
        OperationBinding ob = bindings.getOperationBinding("get${domainClassName}");
        ob.getParamsMap().put("reference", ref);
        this.${beanVOADFFacesVariable} = (${beanVOADFFacesClass})ob.execute();
        return ${beanVOADFFacesVariable};
#end
	    return null;
    }

}
