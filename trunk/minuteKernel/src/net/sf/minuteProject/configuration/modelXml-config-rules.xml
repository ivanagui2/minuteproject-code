<?xml version="1.0"?>

<!DOCTYPE digester-rules PUBLIC 
        "-//Jakarta Apache //DTD digester-rules XML V1.0//EN" 
        "http://jakarta.apache.org/commons/digester/dtds/digester-rules.dtd">
<digester-rules>
  <!--<pattern value="generator-config">
    <object-create-rule classname="net.sf.minuteProject.configuration.bean.GeneratorConfig"/>
	  <set-next-rule methodname="add" paramtype="net.sf.minuteProject.configuration.bean.GeneratorConfig"/>
	  <set-properties-rule/>-->
	  <pattern value="generator-config/configuration">
		  <!-- 
		  <object-create-rule classname="net.sf.minuteProject.configuration.bean.Configuration"/>
		  <set-next-rule methodname="addConfiguration" paramtype="net.sf.minuteProject.configuration.bean.Configuration"/>	  
		   -->			
		  <set-properties-rule>
			<alias attr-name="name" prop-name="name" />
		  </set-properties-rule>
		  <pattern value="model">
			<object-create-rule classname="net.sf.minuteProject.configuration.bean.Model"/>	  
			<set-next-rule methodname="setModel" paramtype="net.sf.minuteProject.configuration.bean.Model"/>
			<set-properties-rule>
				<alias attr-name="name" prop-name="name" />
				<alias attr-name="packageRoot" prop-name="packageRoot" />
			</set-properties-rule>
			<set-properties-rule/>		  
			<pattern value="data-model">
				<object-create-rule classname="net.sf.minuteProject.configuration.bean.DataModel"/>		
				<set-next-rule methodname="setDataModel" paramtype="net.sf.minuteProject.configuration.bean.DataModel"/>		
				<bean-property-setter-rule pattern="schema"/>	
				<pattern value="fileSource">
					<object-create-rule classname="net.sf.minuteProject.configuration.bean.FileSource"/>	
					<set-next-rule methodname="setFileSource" paramtype="net.sf.minuteProject.configuration.bean.FileSource"/>			
					<set-properties-rule/>		  
					<bean-property-setter-rule pattern="name"/>			
					<bean-property-setter-rule pattern="dir"/>		
				</pattern>					
				<pattern value="dataSource">
					<object-create-rule classname="org.apache.commons.dbcp.BasicDataSource"/>	
					<set-next-rule methodname="setBasicDataSource" paramtype="org.apache.commons.dbcp.BasicDataSource"/>			
					<set-properties-rule/>		  
					<bean-property-setter-rule pattern="driverClassName"/>			
					<bean-property-setter-rule pattern="url"/>		
					<bean-property-setter-rule pattern="username"/>		
					<bean-property-setter-rule pattern="password"/>				
				</pattern>			
				<pattern value="primaryKeyPolicy">
					<object-create-rule classname="net.sf.minuteProject.configuration.bean.strategy.datamodel.PrimaryKeyPolicy"/>	
					<set-next-rule methodname="setPrimaryKeyPolicy" paramtype="net.sf.minuteProject.configuration.bean.strategy.datamodel.PrimaryKeyPolicy"/>			
					<set-properties-rule/>		  
					<bean-property-setter-rule pattern="oneGlobal"/>			
					<bean-property-setter-rule pattern="oneForEachTable"/>		
					<pattern value="primaryKeyPolicyPattern">
						<object-create-rule classname="net.sf.minuteProject.configuration.bean.strategy.datamodel.PrimaryKeyPolicyPattern"/>		
						<set-next-rule methodname="addPrimaryKeyPolicyPattern" paramtype="net.sf.minuteProject.configuration.bean.strategy.datamodel.PrimaryKeyPolicyPattern"/>			  				
						<set-properties-rule/>		  
						<bean-property-setter-rule pattern="name"/>		
						<bean-property-setter-rule pattern="prefix"/>	
						<bean-property-setter-rule pattern="suffix"/>	
						<bean-property-setter-rule pattern="sequenceName"/>		
					</pattern>					
				</pattern>
			</pattern>
			<pattern value="business-model">
				<object-create-rule classname="net.sf.minuteProject.configuration.bean.BusinessModel"/>		
				<set-next-rule methodname="setBusinessModel" paramtype="net.sf.minuteProject.configuration.bean.BusinessModel"/>	
				<pattern value="generation-condition">
					<object-create-rule classname="net.sf.minuteProject.configuration.bean.GenerationCondition"/>		
					<set-next-rule methodname="setGenerationCondition" paramtype="net.sf.minuteProject.configuration.bean.GenerationCondition"/>	
					<pattern value="condition">
						<object-create-rule classname="net.sf.minuteProject.configuration.bean.Condition"/>		
						<set-next-rule methodname="addCondition" paramtype="net.sf.minuteProject.configuration.bean.Condition"/>		
						<set-properties-rule>
							<alias attr-name="type" prop-name="type" />
							<alias attr-name="startsWith" prop-name="startsWith" />
							<alias attr-name="result" prop-name="result" />		
						</set-properties-rule>							
					</pattern>					
				</pattern>	
				<pattern value="xml-enrichment">
					<object-create-rule classname="net.sf.minuteProject.configuration.bean.enrichment.XmlEnrichment"/>		
					<set-next-rule methodname="setXmlEnrichment" paramtype="net.sf.minuteProject.configuration.bean.enrichment.XmlEnrichment"/>					
					<set-properties-rule>
						<alias attr-name="name" prop-name="name" />	
						<alias attr-name="baseElement" prop-name="baseElement" />	
						<alias attr-name="is-package-name-available" prop-name="isPackageNameAvailable" />	
					</set-properties-rule>
				</pattern>
				<pattern value="business-package">
					<object-create-rule classname="net.sf.minuteProject.configuration.bean.BusinessPackage"/>		
					<set-next-rule methodname="setBusinessPackage" paramtype="net.sf.minuteProject.configuration.bean.BusinessPackage"/>	
					<set-properties-rule>
						<alias attr-name="default" prop-name="defaultPackage" />
					</set-properties-rule>					
					<pattern value="condition">
						<object-create-rule classname="net.sf.minuteProject.configuration.bean.Condition"/>		
						<set-next-rule methodname="addCondition" paramtype="net.sf.minuteProject.configuration.bean.Condition"/>		
						<set-properties-rule>
							<alias attr-name="type" prop-name="type" />
							<alias attr-name="startsWith" prop-name="startsWith" />
							<alias attr-name="result" prop-name="result" />		
						</set-properties-rule>							
					</pattern>					
				</pattern>	
				<!-- 			
				<pattern value="tables/table">
					<object-create-rule classname="net.sf.minuteProject.configuration.bean.Table"/>		
					<set-next-rule methodname="addTable" paramtype="net.sf.minuteProject.configuration.bean.Table"/>	
					<set-properties-rule/>	
					<bean-property-setter-rule pattern="type"/>	
					<call-method-rule pattern="reference-view-field" methodname="setReferenceViewField" paramcount="0" />
					<call-method-rule pattern="reference-view-child" methodname="setReferenceViewChild" paramcount="0" />
					<call-method-rule pattern="reference-view-parent" methodname="setReferenceViewParent" paramcount="0" />
				</pattern>
					 -->	
			</pattern>		
		  </pattern>
		  <pattern value="target">
			<object-create-rule classname="net.sf.minuteProject.configuration.bean.Target"/>	  
			<set-next-rule methodname="setTarget" paramtype="net.sf.minuteProject.configuration.bean.Target"/>		  
	    	<set-properties-rule/>	
	    	<bean-property-setter-rule pattern="refname"/>	 
	    	<bean-property-setter-rule pattern="name"/>	 
	    	<bean-property-setter-rule pattern="dir"/>	 
	    	<bean-property-setter-rule pattern="fileName"/>	 
	 	  </pattern>
	 </pattern>
</digester-rules>
